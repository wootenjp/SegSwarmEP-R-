% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aco.R
\name{aco_districting}
\alias{aco_districting}
\title{Run the Ant Colony Optimization redistricting algorithm}
\usage{
aco_districting(
  sf_data,
  adj_matrix,
  graph,
  num_districts,
  group_a,
  group_b,
  total_col = "total",
  id_col = NULL,
  county_col = NULL,
  max_district_size = Inf,
  num_ants = 400L,
  num_iterations = 320L,
  demographic_scale = 45,
  compactness_scale = 120,
  penalty_contiguity = -30,
  bonus_contiguity = 60,
  size_scale_factor = log(10),
  num_cores = parallel::detectCores() - 1L,
  num_elite = 5L,
  verbose = TRUE
)
}
\arguments{
\item{sf_data}{An \code{sf} object returned and modified by \code{\link[=prepare_districts]{prepare_districts()}}
(must have \code{center_x} and \code{center_y} columns and be in a metric CRS).}

\item{adj_matrix}{Square adjacency matrix returned by \code{\link[=prepare_districts]{prepare_districts()}}.}

\item{graph}{\code{igraph} graph returned by \code{\link[=prepare_districts]{prepare_districts()}}.}

\item{num_districts}{Integer. Target number of consolidated school districts
(regions) to form.}

\item{group_a}{Character. Column name in \code{sf_data} for demographic group A
enrollment (e.g., \code{"white"}).}

\item{group_b}{Character. Column name in \code{sf_data} for demographic group B
enrollment (e.g., \code{"nonwhite"}).}

\item{total_col}{Character. Column name for total enrollment. Default
\code{"total"}.}

\item{id_col}{Character or \code{NULL}. Column name for district identifiers
(used in result summaries). Default \code{NULL}.}

\item{county_col}{Character or \code{NULL}. Column name for county (used in
result summaries). Default \code{NULL}.}

\item{max_district_size}{Numeric. Maximum total student enrollment permitted
in any single consolidated district. Default \code{Inf} (no limit).}

\item{num_ants}{Integer. Number of ants per iteration. Higher values improve
solution quality at a cost of runtime. Default \code{400}.}

\item{num_iterations}{Integer. Total number of ACO iterations. Default \code{320}.}

\item{demographic_scale}{Numeric. Multiplier for the demographic (Theil's H)
component of the objective score. Default \code{45}.}

\item{compactness_scale}{Numeric. Multiplier for the Polsby-Popper
compactness component. Default \code{120}.}

\item{penalty_contiguity}{Numeric. Score penalty per non-contiguous district
(must be negative). Default \code{-30}.}

\item{bonus_contiguity}{Numeric. Score bonus per contiguous district.
Default \code{60}.}

\item{size_scale_factor}{Numeric. Scaling factor for the size-based
pheromone evaporation adjustment. Default \code{log(10)}.}

\item{num_cores}{Integer. Number of parallel cores. Default
\code{parallel::detectCores() - 1}.}

\item{num_elite}{Integer. Initial number of elite solutions maintained.
Default \code{5}.}

\item{verbose}{Logical. If \code{TRUE} (default), print iteration progress.}
}
\value{
A named list with:
\describe{
\item{\code{best_assignment}}{Integer vector of length \code{n} giving the optimal
district assignment found.}
\item{\code{score_history}}{Numeric vector of the best score at each
iteration.}
\item{\code{h_values}}{Numeric vector of Theil's H for the best ant at each
iteration.}
\item{\code{demographic_history}}{List of \code{data.table} objects (one per
iteration) with the best ant's demographic breakdown.}
\item{\code{pre_elite_assignments}}{List of assignment vectors collected
during the burn-in phase.}
\item{\code{pre_elite_scores}}{Numeric vector of scores for the pre-elite
assignments.}
}
}
\description{
The main entry point for SegSwarmEP. Runs an Ant Colony Optimization (ACO)
heuristic to find a school district grouping that minimises racial/demographic
segregation (Theil's H) while respecting geographic contiguity and
compactness constraints.
}
\examples{
\dontrun{
prep   <- prepare_districts(sf_nj, crs = 32618)
result <- aco_districting(
  sf_data       = prep$sf_data,
  adj_matrix    = prep$adj_matrix,
  graph         = prep$graph,
  num_districts = 21,
  group_a       = "white",
  group_b       = "nonwhite",
  total_col     = "total",
  max_district_size = 124000,
  num_ants      = 400,
  num_iterations = 320
)
prep$sf_data$cluster <- result$best_assignment
}

}
